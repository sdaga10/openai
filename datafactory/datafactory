

variable "resource_group_name" {
  default     = "rg-azuredatafactory"
  description = "Name of the resource group to which the Data Factory should be deployed"
  type        = string
}

variable "location" {
  default     = "East US"
  description = "Location of the resource group"
  type        = string
}

variable "data_factory_name" {
  default     = "datfactory"
  description = "Name of the data factory"
  type        = string
}

variable "version" {
  default     = "v2"
  description = "Version of the data factory"
  type        = string
}

variable "git_url" {
  description = "Git URL of the repository containing the Data Factory resources"
  type        = string
}

variable "git_branch" {
  default     = "master"
  description = "Git Branch of the repository containing the Data Factory resources"
  type        = string
}

variable "git_personal_access_token" {
  description = "Personal access token of the user for accessing the repository"
  type        = string
}

resource "azurerm_data_factory" "example" {
  name                = "${var.data_factory_name}"
  location            = "${var.location}"
  resource_group_name = "${var.resource_group_name}"
  version             = "${var.version}"

  integration_runtime {
    name         = "integrationruntime1"
    type         = "Managed"
    description  = "test"
    node_size    = "Standard_D2_v2"
    auto_scale {
      evaluation_interval = "PT15M"
    }
    linked_service_name = ["linkedservice1", "linkedservice2"]
  }

  git_configuration {
    repository_url = "${var.git_url}"
    branch         = "${var.git_branch}"
    personal_access_token = "${var.git_personal_access_token}"
  }
}
